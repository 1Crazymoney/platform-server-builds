{"version":3,"sources":["../../../../modules/@angular/platform-server/src/location.ts"],"names":[],"mappings":"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","file":"location.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {LocationChangeEvent, LocationChangeListener, PlatformLocation} from '@angular/common/index';\nimport {Inject, Injectable, Optional} from '@angular/core/index';\nimport {DOCUMENT} from '@angular/platform-browser/index';\nimport {Subject} from 'rxjs/Subject';\nimport * as url from 'url';\n\nimport {scheduleMicroTask} from './facade/lang';\nimport {getDOM} from './private_import_platform-browser';\nimport {INITIAL_CONFIG, PlatformConfig} from './tokens';\n/**\n * Server-side implementation of URL state. Implements `pathname`, `search`, and `hash`\n * but not the state stack.\n */\nexport class ServerPlatformLocation implements PlatformLocation {\nprivate _path: string = '/';\nprivate _search: string = '';\nprivate _hash: string = '';\nprivate _hashUpdate = new Subject<LocationChangeEvent>();\n/**\n * @param {?} _doc\n * @param {?} _config\n */\nconstructor(\nprivate _doc: any,   _config: any) {\n    const config = _config as PlatformConfig | null;\n    if (!!config && !!config.url) {\n      const parsedUrl = url.parse(config.url);\n      this._path = parsedUrl.pathname;\n      this._search = parsedUrl.search;\n      this._hash = parsedUrl.hash;\n    }\n  }\n/**\n * @return {?}\n */\ngetBaseHrefFromDOM(): string { return getDOM().getBaseHref(this._doc); }\n/**\n * @param {?} fn\n * @return {?}\n */\nonPopState(fn: LocationChangeListener): void {\n    // No-op: a state stack is not implemented, so\n    // no events will ever come.\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nonHashChange(fn: LocationChangeListener): void { this._hashUpdate.subscribe(fn); }\n/**\n * @return {?}\n */\nget pathname(): string { return this._path; }\n/**\n * @return {?}\n */\nget search(): string { return this._search; }\n/**\n * @return {?}\n */\nget hash(): string { return this._hash; }\n/**\n * @return {?}\n */\nget url(): string { return `${this.pathname}${this.search}${this.hash}`; }\n/**\n * @param {?} value\n * @param {?} oldUrl\n * @return {?}\n */\nprivate setHash(value: string, oldUrl: string) {\n    if (this._hash === value) {\n      // Don't fire events if the hash has not changed.\n      return;\n    }\n    this._hash = value;\n    const /** @type {?} */ newUrl = this.url;\n    scheduleMicroTask(\n        () => this._hashUpdate.next( /** @type {?} */(({ type: 'hashchange', oldUrl, newUrl } as LocationChangeEvent))));\n  }\n/**\n * @param {?} state\n * @param {?} title\n * @param {?} newUrl\n * @return {?}\n */\nreplaceState(state: any, title: string, newUrl: string): void {\n    const /** @type {?} */ oldUrl = this.url;\n    const /** @type {?} */ parsedUrl = url.parse(newUrl, true);\n    this._path = parsedUrl.pathname;\n    this._search = parsedUrl.search;\n    this.setHash(parsedUrl.hash, oldUrl);\n  }\n/**\n * @param {?} state\n * @param {?} title\n * @param {?} newUrl\n * @return {?}\n */\npushState(state: any, title: string, newUrl: string): void {\n    this.replaceState(state, title, newUrl);\n  }\n/**\n * @return {?}\n */\nforward(): void { throw new Error('Not implemented'); }\n/**\n * @return {?}\n */\nback(): void { throw new Error('Not implemented'); }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: undefined, decorators: [{ type: Inject, args: [DOCUMENT, ] }, ]},\n{type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [INITIAL_CONFIG, ] }, ]},\n];\n}\n\nfunction ServerPlatformLocation_tsickle_Closure_declarations() {\n/** @type {?} */\nServerPlatformLocation.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nServerPlatformLocation.ctorParameters;\n/** @type {?} */\nServerPlatformLocation.prototype._path;\n/** @type {?} */\nServerPlatformLocation.prototype._search;\n/** @type {?} */\nServerPlatformLocation.prototype._hash;\n/** @type {?} */\nServerPlatformLocation.prototype._hashUpdate;\n/** @type {?} */\nServerPlatformLocation.prototype._doc;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}