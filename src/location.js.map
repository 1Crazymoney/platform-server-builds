{"version":3,"sources":["../../../../modules/@angular/platform-server/src/location.ts"],"names":[],"mappings":"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","file":"location.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {LocationChangeEvent, LocationChangeListener, PlatformLocation} from '@angular/common/index';\nimport {Injectable} from '@angular/core/index';\nimport {Subject} from 'rxjs/Subject';\nimport * as url from 'url';\n\nimport {scheduleMicroTask} from './facade/lang';\nimport {getDOM} from './private_import_platform-browser';\n/**\n * Server-side implementation of URL state. Implements `pathname`, `search`, and `hash`\n * but not the state stack.\n */\nexport class ServerPlatformLocation implements PlatformLocation {\nprivate _path: string = '/';\nprivate _search: string = '';\nprivate _hash: string = '';\nprivate _hashUpdate = new Subject<LocationChangeEvent>();\n/**\n * @return {?}\n */\ngetBaseHrefFromDOM(): string { return getDOM().getBaseHref(); }\n/**\n * @param {?} fn\n * @return {?}\n */\nonPopState(fn: LocationChangeListener): void {\n    // No-op: a state stack is not implemented, so\n    // no events will ever come.\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nonHashChange(fn: LocationChangeListener): void { this._hashUpdate.subscribe(fn); }\n/**\n * @return {?}\n */\nget pathname(): string { return this._path; }\n/**\n * @return {?}\n */\nget search(): string { return this._search; }\n/**\n * @return {?}\n */\nget hash(): string { return this._hash; }\n/**\n * @return {?}\n */\nget url(): string { return `${this.pathname}${this.search}${this.hash}`; }\n/**\n * @param {?} value\n * @param {?} oldUrl\n * @return {?}\n */\nprivate setHash(value: string, oldUrl: string) {\n    if (this._hash === value) {\n      // Don't fire events if the hash has not changed.\n      return;\n    }\n    this._hash = value;\n    const /** @type {?} */ newUrl = this.url;\n    scheduleMicroTask(\n        () => this._hashUpdate.next( /** @type {?} */(({ type: 'hashchange', oldUrl, newUrl } as LocationChangeEvent))));\n  }\n/**\n * @param {?} state\n * @param {?} title\n * @param {?} newUrl\n * @return {?}\n */\nreplaceState(state: any, title: string, newUrl: string): void {\n    const /** @type {?} */ oldUrl = this.url;\n    const /** @type {?} */ parsedUrl = url.parse(newUrl, true);\n    this._path = parsedUrl.path;\n    this._search = parsedUrl.search;\n    this.setHash(parsedUrl.hash, oldUrl);\n  }\n/**\n * @param {?} state\n * @param {?} title\n * @param {?} newUrl\n * @return {?}\n */\npushState(state: any, title: string, newUrl: string): void {\n    this.replaceState(state, title, newUrl);\n  }\n/**\n * @return {?}\n */\nforward(): void { throw new Error('Not implemented'); }\n/**\n * @return {?}\n */\nback(): void { throw new Error('Not implemented'); }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ServerPlatformLocation_tsickle_Closure_declarations() {\n/** @type {?} */\nServerPlatformLocation.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nServerPlatformLocation.ctorParameters;\n/** @type {?} */\nServerPlatformLocation.prototype._path;\n/** @type {?} */\nServerPlatformLocation.prototype._search;\n/** @type {?} */\nServerPlatformLocation.prototype._hash;\n/** @type {?} */\nServerPlatformLocation.prototype._hashUpdate;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}